!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vectag=e():t.vectag=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="build/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e),n.d(e,"planets",(function(){return P})),n.d(e,"gameOfLife",(function(){return Y})),n.d(e,"fish",(function(){return z})),n.d(e,"preyPredator",(function(){return st}));var i=function(t,e){var n=t.indexOf(e);n>-1?t.splice(n,1):console.log("Impossible to remove element not present in array.")};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.res=r,this.lengthX=Math.floor(e/r+1),this.lengthY=Math.floor(n/r+1),this.cells=[];for(var i=0;i<this.lengthX;i++){this.cells[i]=[];for(var a=0;a<this.lengthY;a++)this.cells[i][a]=[]}}var e,n,r;return e=t,(n=[{key:"get",value:function(t,e,n,r){for(var i=[],a=Math.floor(t/this.res);a<Math.floor(n/this.res+1);a++)if(!(a<0||a>=this.lengthX))for(var o=Math.floor(e/this.res);o<Math.floor(r/this.res+1);o++)o<0||o>=this.lengthY||i.push.apply(i,this.cells[a][o]);return i}},{key:"add",value:function(t,e,n){return this.cells[Math.floor(e/this.res)][Math.floor(n/this.res)].push(t)}},{key:"remove",value:function(t,e,n){i(this.cells[Math.floor(e/this.res)][Math.floor(n/this.res)],t)}},{key:"move",value:function(t,e,n,r,a){var o=Math.floor(e/this.res),s=Math.floor(n/this.res),h=Math.floor(r/this.res),l=Math.floor(a/this.res);if(o!=h||s!=l)return i(this.cells[o][s],t),this.cells[h][l].push(t)}}])&&a(e.prototype,n),r&&a(e,r),t}();function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n,r,i,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.u=e,this.m=n;var s=this.r();this.x=r<s?s:r>e.w-s?e.w-s:r,this.y=i<s?s:i>e.h-s?e.h-s:i,this.vx=a,this.vy=o}var e,n,r;return e=t,(n=[{key:"observe",value:function(){this.fx=0,this.fy=0;var t,e=s(this.u.ps);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this!=n){var r=this.d(n);0!==r&&(r*=r*r,this.fx+=.01*(n.x-this.x)*this.m*n.m/r,this.fy+=.01*(n.y-this.y)*this.m*n.m/r)}}}catch(t){e.e(t)}finally{e.f()}}},{key:"d",value:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)}},{key:"r",value:function(){return Math.pow(this.m/Math.PI,.5)}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=this.fx/this.m,i=this.fy/this.m;if(this.vx+=r*n,this.vy+=i*n,e>0){var a=Math.sqrt(this.vx*this.vx+this.vy*this.vy);a>e&&(this.vx=e*this.vx/a,this.vy=e*this.vy/a)}var o=this.x+this.vx*n,s=this.y+this.vy*n;if(t){var h=this.r(),l=1;o<h&&(o=h,this.vx=-this.vx*l),s<h&&(s=h,this.vy=-this.vy*l),o>this.u.w-h&&(o=this.u.w-h,this.vx=-this.vx*l),s>this.u.h-h&&(s=this.u.h-h,this.vy=-this.vy*l)}else o<0&&(o=this.u.w),s<0&&(s=this.u.h),o>this.u.w&&(o=0),s>this.u.h&&(s=0);this.u.move(this,o,s)}}])&&f(e.prototype,n),r&&f(e,r),t}();function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.min(e,n)/100;d(this,t),this.w=e,this.h=n,this.ps=[],this.grid=new o(e,n,r)}var e,n,r;return e=t,(n=[{key:"m",value:function(){var t,e=0,n=v(this.ps);try{for(n.s();!(t=n.n()).done;)e+=t.value.m}catch(t){n.e(t)}finally{n.f()}return e}},{key:"createPlanet",value:function(t,e,n,r,i){var a=new c(this,t,e,n,r,i);this.add(a)}},{key:"add",value:function(t){t.u=this,this.ps.push(t),this.grid.add(t,t.x,t.y)}},{key:"remove",value:function(t){t.u=null,i(this.ps,t),this.grid.remove(t,t.x,t.y)}},{key:"move",value:function(t,e,n){this.grid.move(t,t.x,t.y,e,n),t.x=e,t.y=n}},{key:"aggregate",value:function(t,e){var n=t.m+e.m,r=this.createPlanet(n,(t.x*t.m+e.x*e.m)/n,(t.y*t.m+e.y*e.m)/n,(t.vx*t.m+e.vx*e.m)/n,(t.vy*t.m+e.vy*e.m)/n);return this.remove(t),this.remove(e),r}},{key:"findCollision",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=v(this.ps);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=2*i.r(),o=this.grid.get(i.x-a,i.y-a,i.x+a,i.y+a),s=v(o);try{for(s.s();!(r=s.n()).done;){var h=r.value;if(i!=h){var l=i.d(h),u=(i.r()+h.r())*e;if(!(l>u))return[i,h]}}}catch(t){s.e(t)}finally{s.f()}}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"step",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=v(this.ps);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.observe()}}catch(t){a.e(t)}finally{a.f()}var s,h=v(this.ps);try{for(h.s();!(s=h.n()).done;){var l=s.value;l.change(e,n,i)}}catch(t){h.e(t)}finally{h.f()}for(var u=this.findCollision(r);null!==u;)this.aggregate(u[0],u[1]),u=this.findCollision(r)}}])&&p(e.prototype,n),r&&p(e,r),t}();function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vadiv",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vacanvas",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;m(this,t);var o=document.getElementById(n);this.w=o.offsetWidth,this.h=o.offsetHeight,this.canvas=document.createElement("canvas"),this.canvas.id=r,this.canvas.width=this.w,this.canvas.height=this.h,o.appendChild(this.canvas),this.c2d=this.canvas.getContext("2d"),this.center=i||{x:.5*this.w,y:.5*this.h},this.ps=a;var s=!1;this.canvas.addEventListener("mousedown",(function(t){s=!0})),this.canvas.addEventListener("mousemove",(function(t){s&&e.pan(-t.movementX*e.ps,t.movementY*e.ps)})),this.canvas.addEventListener("mouseup",(function(t){s=!1}));var h=1.5;this.canvas.addEventListener("wheel",(function(t){var n=t.deltaY>0?h:1/h;e.zoom(n,e.pixToGeoX(t.offsetX),e.pixToGeoY(t.offsetY))}))}var e,n,r;return e=t,(n=[{key:"redraw",value:function(){return console.log("Override redraw method"),this}},{key:"geoToPixX",value:function(t){return(t-this.center.x)/this.ps+.5*this.w}},{key:"geoToPixY",value:function(t){return-(t-this.center.y)/this.ps+.5*this.h}},{key:"pixToGeoX",value:function(t){return(t-.5*this.w)*this.ps+this.center.x}},{key:"pixToGeoY",value:function(t){return-(t-.5*this.h)*this.ps+this.center.y}},{key:"pan",value:function(t,e){this.center.x+=t,this.center.y+=e,this.redraw()}},{key:"zoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center.x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.center.y;this.ps*=t,this.center.x+=(e-this.center.x)*(1-t),this.center.y+=(n-this.center.y)*(1-t),this.redraw()}}])&&b(e.prototype,n),r&&b(e,r),t}();function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"vadiv";var n=document.getElementById(e.divId);this.w=e.w||n.offsetWidth,this.h=e.h||n.offsetHeight,this.cplus=new x(e.divId,"vacanvas"),this.cplus.c2d.fillStyle="black",this.cplus.c2d.fillRect(0,0,this.w,this.h);var r=this;this.cplus.redraw=function(){var t=this.c2d;t.fillStyle="rgba(0,0,0,0.05)",t.fillRect(0,0,r.w,r.h);var e,n=M(r.uni.ps);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i.m/r.uni.m();t.fillStyle="rgb(255,255,"+Math.floor(255*(1-a))+")",t.beginPath(),t.arc(this.geoToPixX(i.x),this.geoToPixY(i.y),i.r()/this.ps,0,2*Math.PI),t.closePath(),t.fill()}}catch(t){n.e(t)}finally{n.f()}t.fillStyle="rgb(200,200,200)",t.fillRect(0,0,65,13),t.fillStyle="rgb(0,0,0)",t.fillText(r.uni.ps.length+" planets",2,10),t.strokeStyle="darkgray",t.beginPath(),t.rect(this.geoToPixX(0),this.geoToPixY(this.h),r.w/this.ps,r.h/this.ps),t.stroke()},this.uni=new g(this.w,this.h)}var e,n,r;return e=t,(n=[{key:"initRandom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;this.uni.ps=[];for(var i=0;i<t;i++){var a=n+Math.random()*(r-n),o=2*Math.random()*Math.PI;this.uni.createPlanet(e,this.w*Math.random(),this.h*Math.random(),a*Math.cos(o),a*Math.sin(o))}return this}},{key:"initBigBang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this.uni.ps=[];for(var a=.5*this.w,o=.5*this.h,s=2*Math.PI/t,h=0;h<t;h++){var l=h*s,u=i*Math.random(),f=a+u*Math.cos(l),c=o+u*Math.sin(l),v=n+Math.random()*(r-n),y=l+2*(Math.random()-.5)*2*Math.PI/3,d=v*Math.cos(y),p=v*Math.sin(y);this.uni.createPlanet(e,f,c,d,p)}return this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=0,o=this,s=function s(){o.uni.step(t,e,n,r),o.cplus.redraw(),i>0&&a++>i||setTimeout(s,0)};return s(),this}},{key:"stop",value:function(){}}])&&S(e.prototype,n),r&&S(e,r),t}(),P=function(t){return new A(t)};function T(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e,this.h=n,this.population=[],this.populationI={}}var e,n,r;return e=t,r=[{key:"getCellSurrounding",value:function(t,e){var n=0===t.x?e.w-1:t.x-1,r=t.x===e.w-1?0:t.x+1,i=0===t.y?e.h-1:t.y-1,a=t.y===e.h-1?0:t.y+1;return[{x:n,y:i},{x:n,y:t.y},{x:n,y:a},{x:t.x,y:i},{x:t.x,y:a},{x:r,y:i},{x:r,y:t.y},{x:r,y:a}]}}],(n=[{key:"add",value:function(t,e){var n=t+"_"+e;if(this.populationI[n])return null;var r={x:t,y:e,nb:0};return this.population.push(r),this.populationI[n]=r,r}},{key:"step",value:function(){var e,n={},r=T(this.population);try{for(r.s();!(e=r.n()).done;){var i,a=e.value,o=T(t.getCellSurrounding(a,this));try{for(o.s();!(i=o.n()).done;){var s=i.value,h=s.x+"_"+s.y,l=n[h];l?l.nb++:(s.nb=1,n[h]=s)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}var u,f=[],c={},v=T(this.population);try{for(v.s();!(u=v.n()).done;){var y=u.value,d=y.x+"_"+y.y,p=n[d];p&&(p.nb<2||p.nb>3||(f.push(y),c[d]=y))}}catch(t){v.e(t)}finally{v.f()}this.population=f,this.populationI=c;var g,m=T(function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}(n));try{for(m.s();!(g=m.n()).done;){var b=g.value;if(3===b.nb){var x=b.x+"_"+b.y;this.populationI[x]||(this.population.push(b),this.populationI[x]=b)}}}catch(t){m.e(t)}finally{m.f()}return this}},{key:"start",value:function(t,e,n){var r=0,i=this;return function a(){i.step(),n.redraw(),t>0&&r++>t||setTimeout(a,e)}(),this}}])&&O(e.prototype,n),r&&O(e,r),t}();function j(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"vadiv";var n=document.getElementById(e.divId);this.w=n.offsetWidth,this.h=n.offsetHeight,this.cplus=new x(e.divId,"vacanvas");var r=this;this.cplus.redraw=function(){var t=this.c2d;t.fillStyle="white",t.fillRect(0,0,r.w,r.h),t.fillStyle="blue";var e,n=j(r.uni.population);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.fillRect(this.geoToPixX(i.x),this.geoToPixY(i.y),1/this.ps,1/this.ps)}}catch(t){n.e(t)}finally{n.f()}t.strokeStyle="lightgray",t.beginPath(),t.rect(this.geoToPixX(0),this.geoToPixY(this.h),r.w/this.ps,r.h/this.ps),t.stroke()},this.uni=new _(this.w,this.h)}var e,n,r;return e=t,(n=[{key:"initRandom",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.05,e=0,n=this.uni.w*this.uni.h*t;e<n;){var r=Math.round(this.uni.w*Math.random()),i=Math.round(this.uni.h*Math.random()),a=this.uni.add(r,i);a&&e++}return this}},{key:"start",value:function(){return this.uni.start(-1,0,this.cplus),this}}])&&X(e.prototype,n),r&&X(e,r),t}(),Y=function(t){return new C(t)};function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.w*Math.random(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.h*Math.random(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;D(this,t),this.sea=e,this.x=n<0?0:n>e.w?e.w:n,this.y=r<0?0:r>e.h?e.h:r,i||a?(this.vx=i,this.vy=a,this.v=Math.hypot(i,a),this.va=Math.atan2(a,i)):(this.va=2*Math.random()*Math.PI-Math.PI,this.v=Math.random()*this.sea.V_MAX,this.vx=this.v*Math.cos(this.va),this.vy=this.v*Math.sin(this.va)),this.ax=0,this.ay=0,this.sea.grid.add(this,this.x,this.y),this.obs=[],this.col=[]}var e,n,r;return e=t,(n=[{key:"observe",value:function(){this.obs=[],this.col=[];var t,e=R(this.sea.grid.get(this.x-this.sea.D_OBS,this.y-this.sea.D_OBS,this.x+this.sea.D_OBS,this.y+this.sea.D_OBS));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n!=this&&(this.d(n)<=this.sea.D_COL&&this.col.push(n),this.d(n)<=this.sea.D_OBS)){var r=Math.atan2(n.y-this.y,n.x-this.x)-this.va;if(r>Math.PI?r-=2*Math.PI:r<=-Math.PI&&(r+=2*Math.PI),(r=Math.abs(r))>.5*this.sea.A_OBS)continue;this.obs.push(n)}}}catch(t){e.e(t)}finally{e.f()}this.ax=0,this.ay=0;var i,a=R(this.col);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=this.d(o),h=1*(1/(s*s)-1/(this.sea.D_COL*this.sea.D_COL));this.ax+=h*(this.x-o.x)/s,this.ay+=h*(this.y-o.y)/s}}catch(t){a.e(t)}finally{a.f()}var l=.01*(this.sea.V_TARGET-this.v);this.ax+=l*this.vx/this.v,this.ay+=l*this.vy/this.v;var u=.9;if(this.obs.length>1){var f,c=0,v=0,y=R(this.obs);try{for(y.s();!(f=y.n()).done;){var d=f.value;c+=d.vx,v+=d.vy}}catch(t){y.e(t)}finally{y.f()}c=(u-1)*this.vx+(1-u)*c/this.obs.length,v=(u-1)*this.vy+(1-u)*v/this.obs.length,this.ax+=.1*c,this.ay+=.1*v}if(null!=this.sea.shark){var p=this.sea.shark,g=Math.hypot(p.x-this.x,p.y-this.y);if(g<=this.sea.D_OBS){var m=5*(1/(g*g)-1/(this.sea.D_OBS*this.sea.D_OBS));this.ax+=m*(this.x-p.x)/g,this.ay+=m*(this.y-p.y)/g}}}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.sea.grid.remove(this,this.x,this.y),this.vx+=this.ax*t+.02*(1-2*Math.random()),this.vy+=this.ay*t+.02*(1-2*Math.random()),this.v=Math.hypot(this.vx,this.vy),this.va=Math.atan2(this.vy,this.vx),this.v>this.sea.V_MAX&&(this.v=this.sea.V_MAX,this.vx=this.sea.V_MAX*Math.cos(this.va),this.vy=this.sea.V_MAX*Math.sin(this.va)),this.x+=this.vx*t,this.y+=this.vy*t,this.x<0&&(this.x=this.sea.w),this.y<0&&(this.y=this.sea.h),this.x>this.sea.w&&(this.x=0),this.y>this.sea.h&&(this.y=0),this.sea.grid.add(this,this.x,this.y)}},{key:"d",value:function(t){return Math.hypot(t.x-this.x,t.y-this.y)}}])&&V(e.prototype,n),r&&V(e,r),t}();function L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var U=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.D_OBS=50,this.A_OBS=200*Math.PI/180,this.D_COL=10,this.V_TARGET=.3,this.V_MAX=.6,this.D_SHARK_EAT=12,this.EATEN_SARDIN_NB=0,this.w=e,this.h=n,this.grid=new o(e,n,this.D_OBS),this.fish=[],this.shark=null,this.killed=[]}var e,n,r;return e=t,(n=[{key:"step",value:function(){var t,e=L(this.fish);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.observe()}}catch(t){e.e(t)}finally{e.f()}var r,i=L(this.fish);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.move()}}catch(t){i.e(t)}finally{i.f()}this.sharkEat()}},{key:"sharkEat",value:function(){if(null!=this.shark){this.killed=[];var t,e=this.shark.x,n=this.shark.y,r=L(this.grid.get(e-this.D_SHARK_EAT,n-this.D_SHARK_EAT,e+this.D_SHARK_EAT,n+this.D_SHARK_EAT));try{for(r.s();!(t=r.n()).done;){var a=t.value;Math.hypot(e-a.x,n-a.y)>this.D_SHARK_EAT||(this.killed.push(a),i(this.fish,a),this.grid.remove(a,a.x,a.y))}}catch(t){r.e(t)}finally{r.f()}this.EATEN_SARDIN_NB+=this.killed.length}}},{key:"addFish",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<t;e++)this.fish.push(new H(this))}}])&&G(e.prototype,n),r&&G(e,r),t}();function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"vadiv";var n=document.getElementById(e.divId);this.w=n.offsetWidth,this.h=n.offsetHeight,this.cplus=new x(e.divId,"vacanvas"),this.cplus.c2d.fillStyle="black",this.cplus.c2d.fillRect(0,0,this.w,this.h),this.fishView=!1,this.fishHalo=!1;var r=this;this.cplus.redraw=function(){var t=this.c2d,e=r.sea;t.fillStyle="rgba(120,120,255,0.6)",t.fillRect(0,0,r.w,r.h),t.lineWidth=2/this.ps;var n,i=$(e.fish);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=Math.floor(255*Math.abs(a.va)/Math.PI);t.strokeStyle="rgb(255, 255, "+o+")";var s=7/a.v,h=s*a.vx*.5,l=s*a.vy*.5;t.beginPath(),t.moveTo(this.geoToPixX(a.x-h),this.geoToPixY(a.y-l)),t.lineTo(this.geoToPixX(a.x+h),this.geoToPixY(a.y+l)),t.closePath(),t.stroke()}}catch(t){i.e(t)}finally{i.f()}if(r.fishView){t.fillStyle="rgba(255,255,255,0.3)",t.lineWidth=1;var u,f=$(e.fish);try{for(f.s();!(u=f.n()).done;){var c=u.value;t.beginPath(),t.moveTo(this.geoToPixX(c.x),this.geoToPixY(c.y)),t.arc(this.geoToPixX(c.x),this.geoToPixY(c.y),e.D_OBS/this.ps,c.va-.5*e.A_OBS,c.va+.5*e.A_OBS),t.closePath(),t.fill()}}catch(t){f.e(t)}finally{f.f()}t.strokeStyle="rgb(255,0,255)",t.lineWidth=.5;var v,y=$(e.fish);try{for(y.s();!(v=y.n()).done;){var d,p=v.value,g=$(p.obs);try{for(g.s();!(d=g.n()).done;){var m=d.value;t.beginPath(),t.moveTo(this.geoToPixX(p.x),this.geoToPixY(p.y)),t.lineTo(this.geoToPixX(m.x),this.geoToPixY(m.y)),t.closePath(),t.stroke()}}catch(t){g.e(t)}finally{g.f()}}}catch(t){y.e(t)}finally{y.f()}}if(r.fishHalo){t.strokeStyle="red",t.lineWidth=1;var b,x=$(e.fish);try{for(x.s();!(b=x.n()).done;){var w=b.value;t.beginPath(),t.arc(this.geoToPixX(w.x),this.geoToPixY(w.y),.5*e.D_COL/this.ps,0,2*Math.PI),t.closePath(),t.stroke()}}catch(t){x.e(t)}finally{x.f()}}if(null!=e.shark){t.lineWidth=4/this.ps,t.strokeStyle="black";var M=12/this.ps,k=M*Math.cos(e.shark.angle),S=M*Math.sin(e.shark.angle);t.beginPath(),t.moveTo(this.geoToPixX(e.shark.x),this.geoToPixY(e.shark.y)),t.lineTo(this.geoToPixX(e.shark.x)-k,this.geoToPixY(e.shark.y)-S),t.closePath(),t.stroke()}t.fillStyle="red",t.lineWidth=1;var A,P=$(e.killed);try{for(P.s();!(A=P.n()).done;){var T=A.value;t.beginPath(),t.moveTo(this.geoToPixX(T.x),this.geoToPixY(T.y)),t.arc(this.geoToPixX(T.x),this.geoToPixY(T.y),4,0,2*Math.PI),t.closePath(),t.fill()}}catch(t){P.e(t)}finally{P.f()}t.strokeStyle="darkgray",t.beginPath(),t.rect(this.geoToPixX(0)-3,this.geoToPixY(this.h)-3,r.w/this.ps+3,r.h/this.ps+3),t.stroke()},this.cplus.canvas.addEventListener("mouseover",(function(t){r.sea.shark={x:r.cplus.pixToGeoX(t.offsetX),y:r.cplus.pixToGeoY(t.offsetY),angle:0}})),this.cplus.canvas.addEventListener("mousemove",(function(t){var e=r.cplus.pixToGeoX(t.offsetX),n=r.cplus.pixToGeoY(t.offsetY),i=Math.atan2(-n+r.sea.shark.y,e-r.sea.shark.x);r.sea.shark={x:e,y:n,angle:i}})),this.cplus.canvas.addEventListener("mouseout",(function(t){r.sea.shark=null})),this.sea=new U(this.w,this.h)}var e,n,r;return e=t,(n=[{key:"initRandom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return this.sea.addFish(t),this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0,r=this,i=function i(){r.sea.step(t),r.cplus.redraw(),e>0&&n++>e||setTimeout(i,0)};return i(),this}}])&&N(e.prototype,n),r&&N(e,r),t}(),z=function(t){return new q(t)};function F(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.V_MAX=.1,this.p=.02,this.q=.1,this.r=.5,this.nb=3,this.predators=[],this.preys=[],this.d=10,this.timeStepMs=20,this.grid=new o(e,n,this.d)}var e,n,i;return e=t,(n=[{key:"step",value:function(t){var e,n,i,a=F(this.preys);try{for(a.s();!(i=a.n()).done;)i.value.observe()}catch(t){a.e(t)}finally{a.f()}var o,s=F(this.predators);try{for(s.s();!(o=s.n()).done;)o.value.observe()}catch(t){s.e(t)}finally{s.f()}var h,l=[],u=[],f=[],c=[],v=F(this.preys);try{for(v.s();!(h=v.n()).done;){var y=h.value;Math.random()>this.q||0==y.predators.length&&(y.preys.length>=this.nb||l.push(y.makeChild()))}}catch(t){v.e(t)}finally{v.f()}var d,p=F(this.predators);try{for(p.s();!(d=p.n()).done;){var g=d.value;if(0==g.preys.length)Math.random()<this.p&&c.push(g);else{var m=g.preys.get(int(g.preys.length*Math.random()));if(u.push(m),Math.random()>r)continue;if(g.predators.length>=nb)continue;f.push(g.makeChild())}}}catch(t){p.e(t)}finally{p.f()}(e=this.preys).push.apply(e,l),(n=this.predators).push.apply(n,f),this.preys=this.preys.filter((function(t){return!u.has(t)}));for(var b=0,x=u;b<x.length;b++){var w=x[b];grid.remove(w,w.x,w.y)}this.predators=this.predators.filter((function(t){return!c.has(t)}));for(var M=0,k=c;M<k.length;M++){var S=k[M];grid.remove(S,S.x,S.y)}var A,P=F(this.preys);try{for(P.s();!(A=P.n()).done;)A.value.move()}catch(t){P.e(t)}finally{P.f()}var T,I=F(this.predators);try{for(I.s();!(T=I.n()).done;)T.value.move()}catch(t){I.e(t)}finally{I.f()}}}])&&Q(e.prototype,n),i&&Q(e,i),t}();function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;tt(this,t),this.type=e,this.l=n,this.x=r<0?0:r>n.w?n.w:r,this.y=i<0?0:i>n.h?n.h:i,this.vx=0,this.vy=0,this.predators=[],this.preys=[],n.grid.add(this,this.x,this.y)}var e,n,r;return e=t,(n=[{key:"d",value:function(t){return Math.hypot(t.x-this.x,t.y-this.y)}},{key:"move",value:function(){var t=this.l;t.grid.remove(this,this.x,this.y);var e=2*Math.random()*Math.PI,n=.01*Math.random();this.vx+=n*Math.cos(e)*t.timeStepMs,this.vx>t.V_MAX?this.vx=t.V_MAX:this.vx<-t.V_MAX&&(this.vx=-t.V_MAX),this.vy+=n*Math.sin(e)*t.timeStepMs,this.vy>t.V_MAX?this.vy=t.V_MAX:this.vy<-t.V_MAX&&(this.vy=-t.V_MAX),this.x+=this.vx*t.timeStepMs,this.x<0?this.x=t.w:this.x>t.w&&(this.x=0),this.y+=this.vy*t.timeStepMs,this.y<0?this.y=t.h:this.y>t.h&&(this.y=0),t.grid.add(this,this.x,this.y)}},{key:"observe",value:function(){this.preys=[],this.predators=[];for(var e=0,n=[];e<n.length;e++){var r=n[e];r!=this&&(this.d(r)>l.d||(r.type==t.PREY?this.preys.push(r):this.predators.push(r)))}}},{key:"makeChild",value:function(){return new t(this.type,this.l,this.x,this.y)}}])&&et(e.prototype,n),r&&et(e,r),t}();function rt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"vadiv";var n=document.getElementById(e.divId);this.w=n.offsetWidth,this.h=n.offsetHeight,this.cplus=new x(e.divId,"vacanvas"),this.cplus.c2d.fillStyle="white",this.cplus.c2d.fillRect(0,0,this.w,this.h);var r=function(t){c2.fillRect(t.x,t.y,3,3)},i=this;this.cplus.redraw=function(){var t=this.c2d;t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(0,0,w,h),t.fillStyle="blue";var e,n=rt(preys);try{for(n.s();!(e=n.n()).done;){var a=e.value;r(a)}}catch(t){n.e(t)}finally{n.f()}t.fillStyle="red";var o,s=rt(predators);try{for(s.s();!(o=s.n()).done;){var l=o.value;r(l)}}catch(t){s.e(t)}finally{s.f()}t.fillStyle="lightgray",t.fillRect(0,0,65,13),t.fillStyle="black",t.fillText(preys.length+"/"+predators.length,2,10),t.strokeStyle="darkgray",t.beginPath(),t.rect(this.geoToPixX(0),this.geoToPixY(this.h),i.w/this.ps,i.h/this.ps),t.stroke()},this.land=new Z(this.w,this.h)}var e,n,r;return e=t,(n=[{key:"initRandom",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=0;n<t;n++)this.land.preys.push(new nt(0,this.land,this.w*Math.random(),this.h*Math.random()));for(var r=0;r<e;r++)this.land.predators.push(new nt(1,this.land,this.w*Math.random(),this.h*Math.random()));return this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0,r=this,i=function i(){r.land.step(t),r.cplus.redraw(),e>0&&n++>e||setTimeout(i,0)};return i(),this}}])&&at(e.prototype,n),r&&at(e,r),t}(),st=function(t){return new ot(t)}}])}));