!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.vectag=i():t.vectag=i()}(window,(function(){return function(t){var i={};function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)n.d(e,r,function(i){return t[i]}.bind(null,r));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="build/",n(n.s=0)}([function(t,i,n){t.exports=n(1)},function(t,i,n){"use strict";n.r(i),n.d(i,"planets",(function(){return f})),n.d(i,"gameOfLife",(function(){return p}));var e=function(t,i){var n=t.indexOf(i);n>-1?t.splice(n,1):console.log("Impossible to remove element not present in array.")};function r(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var h=function(){function t(i,n,e,r,h,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.u=i,this.m=n;var o=this.r();this.x=e<o?o:e>i.w-o?i.w-o:e,this.y=r<o?o:r>i.h-o?i.h-o:r,this.vx=h,this.vy=s}var i,n,e;return i=t,(n=[{key:"observe",value:function(){this.fx=0,this.fy=0;for(var t=0;t<this.u.ps.length;t++){var i=this.u.ps[t];if(this!=i){var n=this.d(i);0!==n&&(n*=n*n,this.fx+=.01*(i.x-this.x)*this.m*i.m/n,this.fy+=.01*(i.y-this.y)*this.m*i.m/n)}}}},{key:"d",value:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)}},{key:"r",value:function(){return Math.pow(this.m/Math.PI,.5)}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,e=this.fx/this.m,r=this.fy/this.m;if(this.vx+=e*n,this.vy+=r*n,i>0){var h=Math.sqrt(this.vx*this.vx+this.vy*this.vy);h>i&&(this.vx=i*this.vx/h,this.vy=i*this.vy/h)}if(this.x+=this.vx*n,this.y+=this.vy*n,t){var s=this.r(),o=1;this.x<s&&(this.x=s,this.vx=-this.vx*o),this.y<s&&(this.y=s,this.vy=-this.vy*o),this.x>this.u.w-s&&(this.x=this.u.w-s,this.vx=-this.vx*o),this.y>this.u.h-s&&(this.y=this.u.h-s,this.vy=-this.vy*o)}else this.x<0&&(this.x=this.u.w),this.y<0&&(this.y=this.u.h),this.x>this.u.w&&(this.x=0),this.y>this.u.h&&(this.y=0)}}])&&r(i.prototype,n),e&&r(i,e),t}();function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var o=function(){function t(i,n){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=i,this.h=n,this.ps=[]}var i,n,r;return i=t,(n=[{key:"m",value:function(){for(var t=0,i=0;i<this.ps.length;i++)t+=this.ps[i].m;return t}},{key:"findCollision",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=0;i<this.ps.length;i++)for(var n=this.ps[i],e=i+1;e<this.ps.length;e++){var r=this.ps[e],h=n.d(r),s=(n.r()+r.r())*t;if(!(h>s))return[n,r]}return null}},{key:"aggregate",value:function(t){var i=t[0],n=t[1],e=i.m+n.m;return new h(this,e,(i.x*i.m+n.x*n.m)/e,(i.y*i.m+n.y*n.m)/e,(i.vx*i.m+n.vx*n.m)/e,(i.vy*i.m+n.vy*n.m)/e)}},{key:"step",value:function(){var t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;for(t=0;t<this.ps.length;t++)this.ps[t].observe();for(t=0;t<this.ps.length;t++)this.ps[t].change(i,n,h);for(var s=this.findCollision(r);null!==s;)this.ps.push(this.aggregate(s)),e(this.ps,s[0]),e(this.ps,s[1]),s=this.findCollision(r)}}])&&s(i.prototype,n),r&&s(i,r),t}(),a=function(t,i,n){var e=document.getElementById(t).getContext("2d");i&&(e.canvas.width=i),n&&(e.canvas.height=n),this.getContext2D=function(){return e},this.redraw=function(){return console.log("Override redraw method"),this}};function u(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var l=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),(i=i||{}).divId=i.divId||"cdiv",i.canvasId=i.canvasId||"canvas";var n=document.getElementById(i.divId);this.w=n.offsetWidth,this.h=n.offsetHeight,this.uni=new o(this.w,this.h),this.cplus=new a(i.canvasId,this.w,this.h);var e=this.cplus.getContext2D();e.fillStyle="black",e.fillRect(0,0,this.w,this.h);var r=this;this.cplus.redraw=function(){e.fillStyle="rgba(0,0,0,0.05)",e.fillRect(0,0,r.w,r.h);for(var t=0;t<r.uni.ps.length;t++){var i=r.uni.ps[t],n=i.m/r.uni.m();e.fillStyle="rgb(255,255,"+Math.floor(255*(1-n))+")",e.beginPath(),e.arc(i.x,i.y,i.r(),0,2*Math.PI),e.closePath(),e.fill()}e.fillStyle="rgb(200,200,200)",e.fillRect(0,0,65,13),e.fillStyle="rgb(0,0,0)",e.fillText(r.uni.ps.length+" planets",2,10)}}var i,n,e;return i=t,(n=[{key:"initRandom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;this.uni.ps=[];for(var r=0;r<t;r++){var s=n+Math.random()*(e-n),o=2*Math.random()*Math.PI;this.uni.ps.push(new h(this.uni,i,this.w*Math.random(),this.h*Math.random(),s*Math.cos(o),s*Math.sin(o)))}return this}},{key:"initBigBang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this.uni.ps=[];for(var s=.5*this.w,o=.5*this.h,a=2*Math.PI/t,u=0;u<t;u++){var l=u*a,f=r*Math.random(),v=s+f*Math.cos(l),c=o+f*Math.sin(l),p=n+Math.random()*(e-n),d=l+2*(Math.random()-.5)*2*Math.PI/3,y=p*Math.cos(d),g=p*Math.sin(d);this.uni.ps.push(new h(this.uni,i,v,c,y,g))}return this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,h=0,s=this,o=function o(){s.uni.step(t,i,n,e),s.cplus.redraw(),r>0&&h++>r||setTimeout(o,0)};o()}},{key:"stop",value:function(){}}])&&u(i.prototype,n),e&&u(i,e),t}(),f=function(t){return new l(t)},v=function(t,i){this.w=t,this.h=i,this.population=[],this.populationI={},this.add=function(t,i){var n=t+"_"+i,e=this.populationI[n];return e?null:(e={x:t,y:i,nb:0},this.population.push(e),this.populationI[n]=e,e)},this.fillRandomly=function(t){for(var i=0,n=this.w*this.h*t;i<n;){var e=Math.round(this.w*Math.random()),r=Math.round(this.h*Math.random());this.add(e,r)&&i++}return this},this.step=function(){var t,i,n,e,r,h,s,o={};for(t=0;t<this.population.length;t++){var a=c(this.population[t],this);for(i=0;i<a.length;i++)(h=o[s=(r=a[i]).x+"_"+r.y])?h.nb++:(r.nb=1,o[s]=r)}var u=[],l={};for(t=0;t<this.population.length;t++)(e=o[s=(n=this.population[t]).x+"_"+n.y])&&(e.nb<2||e.nb>3||(u.push(n),l[s]=n));this.population=u,this.populationI=l;var f=function(t){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(t[n]);return i}(o);for(o=null,t=0;t<f.length;t++)3===(r=f[t]).nb&&(s=r.x+"_"+r.y,(n=this.populationI[s])||(this.population.push(r),this.populationI[s]=r));return this},this.start=function(t,i,n){var e=0,r=this;return function h(){r.step(),n.redraw(),t>0&&e++>t||setTimeout(h,i)}(),this}},c=function(t,i){var n=0===t.x?i.w-1:t.x-1,e=t.x===i.w-1?0:t.x+1,r=0===t.y?i.h-1:t.y-1,h=t.y===i.h-1?0:t.y+1;return[{x:n,y:r},{x:n,y:t.y},{x:n,y:h},{x:t.x,y:r},{x:t.x,y:h},{x:e,y:r},{x:e,y:t.y},{x:e,y:h}]},p=function(t,i){var n=document.getElementById(t),e=n.offsetWidth,r=n.offsetHeight,h=new v(e,r).fillRandomly(.05),s=new a(i,e,r);s.redraw=function(){var t=this.getContext2D();t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#0000FF";for(var i=0;i<h.population.length;i++){var n=h.population[i];t.fillRect(n.x,n.y,1,1)}},h.start(-1,0,s)}}])}));