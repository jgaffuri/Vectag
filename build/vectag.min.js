!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.vectag=n():t.vectag=n()}(window,(function(){return function(t){var n={};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)i.d(e,r,function(n){return t[n]}.bind(null,r));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="build/",i(i.s=0)}([function(t,n,i){t.exports=i(1)},function(t,n,i){"use strict";i.r(n),i.d(n,"planets",(function(){return u})),i.d(n,"gameOfLife",(function(){return v}));var e=function(t,n){var i=t.indexOf(n);i>-1?t.splice(i,1):console.log("Impossible to remove element not present in array.")};function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var o=function(){function t(n,i,e,r,o,s){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.u=n,this.m=i;var h=this.r();this.x=e<h?h:e>n.w-h?n.w-h:e,this.y=r<h?h:r>n.h-h?n.h-h:r,this.vx=o,this.vy=s}var n,i,e;return n=t,(i=[{key:"observe",value:function(){this.fx=0,this.fy=0;for(var t=0;t<this.u.ps.length;t++){var n=this.u.ps[t];if(this!=n){var i=this.d(n);0!==i&&(i*=i*i,this.fx+=.01*(n.x-this.x)*this.m*n.m/i,this.fy+=.01*(n.y-this.y)*this.m*n.m/i)}}}},{key:"d",value:function(t){var n=t.x-this.x,i=t.y-this.y;return Math.sqrt(n*n+i*i)}},{key:"r",value:function(){return Math.sqrt(this.m/Math.PI)}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.fx/this.m,e=this.fy/this.m;if(this.vx+=i*t,this.vy+=e*t,this.x+=this.vx*t,this.y+=this.vy*t,n){var r=this.r(),o=1;this.x<r&&(this.x=r,this.vx=-this.vx*o),this.y<r&&(this.y=r,this.vy=-this.vy*o),this.x>this.u.w-r&&(this.x=this.u.w-r,this.vx=-this.vx*o),this.y>this.u.h-r&&(this.y=this.u.h-r,this.vy=-this.vy*o)}else this.x<0&&(this.x=this.u.w),this.y<0&&(this.y=this.u.h),this.x>this.u.w&&(this.x=0),this.y>this.u.h&&(this.y=0)}}])&&r(n.prototype,i),e&&r(n,e),t}();function s(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var h=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=n,this.h=i,this.ps=[]}var n,i,r;return n=t,(i=[{key:"m",value:function(){for(var t=0,n=0;n<this.ps.length;n++)t+=this.ps[n].m;return t}},{key:"findCollision",value:function(){for(var t=0;t<this.ps.length;t++)for(var n=this.ps[t],i=t+1;i<this.ps.length;i++){var e=this.ps[i];if(!(n.d(e)>n.r()+e.r()))return[n,e]}return null}},{key:"aggregate",value:function(t){var n=t[0],i=t[1],e=n.m+i.m;return new o(this,e,(n.x*n.m+i.x*i.m)/e,(n.y*n.m+i.y*i.m)/e,(n.vx*n.m+i.vx*i.m)/e,(n.vy*n.m+i.vy*i.m)/e)}},{key:"step",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(t=0;t<this.ps.length;t++)this.ps[t].observe();for(t=0;t<this.ps.length;t++)this.ps[t].change(n,i);for(var r=this.findCollision();null!==r;)this.ps.push(this.aggregate(r)),e(this.ps,r[0]),e(this.ps,r[1]),r=this.findCollision()}}])&&s(n.prototype,i),r&&s(n,r),t}(),a=function(t,n,i){var e=document.getElementById(t).getContext("2d");n&&(e.canvas.width=n),i&&(e.canvas.height=i),this.getContext2D=function(){return e},this.redraw=function(){return console.log("Override redraw method"),this}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};n.divId=t.divId||"cdiv",n.canvasId=t.canvasId||"canvas";var i=document.getElementById(n.divId),e=i.offsetWidth,r=i.offsetHeight,s=new h(e,r),u=new a(n.canvasId,e,r),l=u.getContext2D();return l.fillStyle="#000000",l.fillRect(0,0,e,r),u.redraw=function(){l.fillStyle="rgba(0,0,0,0.05)",l.fillRect(0,0,e,r);for(var t=0;t<s.ps.length;t++){var n=s.ps[t],i=n.m/s.m();l.fillStyle="rgb(255,255,"+Math.floor(255*(1-i))+")",l.beginPath(),l.arc(n.x,n.y,n.r(),0,2*Math.PI),l.closePath(),l.fill()}l.fillStyle="rgb(200,200,200)",l.fillRect(0,0,65,13),l.fillStyle="rgb(0,0,0)",l.fillText(s.ps.length+" planets",2,10)},n.initRandom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;s.ps=[];for(var a=0;a<t;a++){var u=i+Math.random()*(h-i),l=2*Math.random()*Math.PI;s.ps.push(new o(s,n,e*Math.random(),r*Math.random(),u*Math.cos(l),u*Math.sin(l)))}return this},n.initBigBang=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;s.ps=[];for(var u=.5*e,l=.5*r,f=2*Math.PI/t,v=0;v<t;v++){var c=v*f,p=a*Math.random(),d=u+p*Math.cos(c),y=l+p*Math.sin(c),g=i+Math.random()*(h-i),x=c+2*(Math.random()-.5)*2*Math.PI/3,m=g*Math.cos(x),b=g*Math.sin(x);s.ps.push(new o(s,n,d,y,m,b))}return this},n.start=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,e=0,r=function r(){s.step(n,t),u.redraw(),i>0&&e++>i||setTimeout(r,0)};r()},n.stop=function(){},n},l=function(t,n){this.w=t,this.h=n,this.population=[],this.populationI={},this.add=function(t,n){var i=t+"_"+n,e=this.populationI[i];return e?null:(e={x:t,y:n,nb:0},this.population.push(e),this.populationI[i]=e,e)},this.fillRandomly=function(t){for(var n=0,i=this.w*this.h*t;n<i;){var e=Math.round(this.w*Math.random()),r=Math.round(this.h*Math.random());this.add(e,r)&&n++}return this},this.step=function(){var t,n,i,e,r,o,s,h={};for(t=0;t<this.population.length;t++){var a=f(this.population[t],this);for(n=0;n<a.length;n++)(o=h[s=(r=a[n]).x+"_"+r.y])?o.nb++:(r.nb=1,h[s]=r)}var u=[],l={};for(t=0;t<this.population.length;t++)(e=h[s=(i=this.population[t]).x+"_"+i.y])&&(e.nb<2||e.nb>3||(u.push(i),l[s]=i));this.population=u,this.populationI=l;var v=function(t){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(t[i]);return n}(h);for(h=null,t=0;t<v.length;t++)3===(r=v[t]).nb&&(s=r.x+"_"+r.y,(i=this.populationI[s])||(this.population.push(r),this.populationI[s]=r));return this},this.start=function(t,n,i){var e=0,r=this;return function o(){r.step(),i.redraw(),t>0&&e++>t||setTimeout(o,n)}(),this}},f=function(t,n){var i=0===t.x?n.w-1:t.x-1,e=t.x===n.w-1?0:t.x+1,r=0===t.y?n.h-1:t.y-1,o=t.y===n.h-1?0:t.y+1;return[{x:i,y:r},{x:i,y:t.y},{x:i,y:o},{x:t.x,y:r},{x:t.x,y:o},{x:e,y:r},{x:e,y:t.y},{x:e,y:o}]},v=function(t,n){var i=document.getElementById(t),e=i.offsetWidth,r=i.offsetHeight,o=new l(e,r).fillRandomly(.05),s=new a(n,e,r);s.redraw=function(){var t=this.getContext2D();t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#0000FF";for(var n=0;n<o.population.length;n++){var i=o.population[n];t.fillRect(i.x,i.y,1,1)}},o.start(-1,0,s)}}])}));