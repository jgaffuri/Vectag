!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vectag=e():t.vectag=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="build/",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e),i.d(e,"planets",(function(){return d})),i.d(e,"gameOfLife",(function(){return g}));var n=function(t,e){var i=t.indexOf(e);i>-1?t.splice(i,1):console.log("Impossible to remove element not present in array.")};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.res=n,this.lengthX=Math.floor(e/n+1),this.lengthY=Math.floor(i/n+1),this.cells=[];for(var r=0;r<this.lengthX;r++){this.cells[r]=[];for(var o=0;o<this.lengthY;o++)this.cells[r][o]=[]}}var e,i,o;return e=t,(i=[{key:"get",value:function(t,e,i,n){for(var r=[],o=Math.floor(t/this.res);o<Math.floor(i/this.res+1);o++)if(!(o<0||o>=this.lengthX))for(var h=Math.floor(e/this.res);h<Math.floor(n/this.res+1);h++)h<0||h>=this.lengthY||r.push.apply(r,this.cells[o][h]);return r}},{key:"add",value:function(t,e,i){return this.cells[Math.floor(e/this.res)][Math.floor(i/this.res)].push(t)}},{key:"remove",value:function(t,e,i){n(this.cells[Math.floor(e/this.res)][Math.floor(i/this.res)],t)}},{key:"move",value:function(t,e,i,r,o){var h=Math.floor(e/this.res),s=Math.floor(i/this.res),a=Math.floor(r/this.res),l=Math.floor(o/this.res);if(h!=a||s!=l)return n(this.cells[h][s],t),this.cells[a][l].push(t)}}])&&r(e.prototype,i),o&&r(e,o),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e,i,n,r,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.u=e,this.m=i;var s=this.r();this.x=n<s?s:n>e.w-s?e.w-s:n,this.y=r<s?s:r>e.h-s?e.h-s:r,this.vx=o,this.vy=h}var e,i,n;return e=t,(i=[{key:"observe",value:function(){this.fx=0,this.fy=0;for(var t=0;t<this.u.ps.length;t++){var e=this.u.ps[t];if(this!=e){var i=this.d(e);0!==i&&(i*=i*i,this.fx+=.01*(e.x-this.x)*this.m*e.m/i,this.fy+=.01*(e.y-this.y)*this.m*e.m/i)}}}},{key:"d",value:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)}},{key:"r",value:function(){return Math.pow(this.m/Math.PI,.5)}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=this.fx/this.m,r=this.fy/this.m;if(this.vx+=n*i,this.vy+=r*i,e>0){var o=Math.sqrt(this.vx*this.vx+this.vy*this.vy);o>e&&(this.vx=e*this.vx/o,this.vy=e*this.vy/o)}var h=this.x+this.vx*i,s=this.y+this.vy*i;if(t){var a=this.r(),l=1;h<a&&(h=a,this.vx=-this.vx*l),s<a&&(s=a,this.vy=-this.vy*l),h>this.u.w-a&&(h=this.u.w-a,this.vx=-this.vx*l),s>this.u.h-a&&(s=this.u.h-a,this.vy=-this.vy*l)}else h<0&&(h=this.u.w),s<0&&(s=this.u.h),h>this.u.w&&(h=0),s>this.u.h&&(s=0);this.u.move(this,h,s)}}])&&h(e.prototype,i),n&&h(e,n),t}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.min(e,i)/100;a(this,t),this.w=e,this.h=i,this.ps=[],this.grid=new o(e,i,n)}var e,i,r;return e=t,(i=[{key:"m",value:function(){for(var t=0,e=0;e<this.ps.length;e++)t+=this.ps[e].m;return t}},{key:"createPlanet",value:function(t,e,i,n,r){var o=new s(this,t,e,i,n,r);this.add(o)}},{key:"add",value:function(t){t.u=this,this.ps.push(t),this.grid.add(t,t.x,t.y)}},{key:"remove",value:function(t){t.u=null,n(this.ps,t),this.grid.remove(t,t.x,t.y)}},{key:"move",value:function(t,e,i){this.grid.move(t,t.x,t.y,e,i),t.x=e,t.y=i}},{key:"aggregate",value:function(t,e){var i=t.m+e.m,n=this.createPlanet(i,(t.x*t.m+e.x*e.m)/i,(t.y*t.m+e.y*e.m)/i,(t.vx*t.m+e.vx*e.m)/i,(t.vy*t.m+e.vy*e.m)/i);return this.remove(t),this.remove(e),n}},{key:"findCollision",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<this.ps.length;e++)for(var i=this.ps[e],n=2*i.r(),r=this.grid.get(i.x-n,i.y-n,i.x+n,i.y+n),o=0;o<r.length;o++){var h=r[o];if(i!=h){var s=i.d(h),a=(i.r()+h.r())*t;if(!(s>a))return[i,h]}}return null}},{key:"step",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;for(t=0;t<this.ps.length;t++)this.ps[t].observe();for(t=0;t<this.ps.length;t++)this.ps[t].change(e,i,r);for(var o=this.findCollision(n);null!==o;)this.aggregate(o[0],o[1]),o=this.findCollision(n)}}])&&l(e.prototype,i),r&&l(e,r),t}(),f=function(t,e,i){var n=document.getElementById(t).getContext("2d");e&&(n.canvas.width=e),i&&(n.canvas.height=i),this.getContext2D=function(){return n},this.redraw=function(){return console.log("Override redraw method"),this}};function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"cdiv",e.canvasId=e.canvasId||"canvas";var i=document.getElementById(e.divId);this.w=i.offsetWidth,this.h=i.offsetHeight,this.uni=new u(this.w,this.h),this.cplus=new f(e.canvasId,this.w,this.h);var n=this.cplus.getContext2D();n.fillStyle="black",n.fillRect(0,0,this.w,this.h);var r=this;this.cplus.redraw=function(){n.fillStyle="rgba(0,0,0,0.05)",n.fillRect(0,0,r.w,r.h);for(var t=0;t<r.uni.ps.length;t++){var e=r.uni.ps[t],i=e.m/r.uni.m();n.fillStyle="rgb(255,255,"+Math.floor(255*(1-i))+")",n.beginPath(),n.arc(e.x,e.y,e.r(),0,2*Math.PI),n.closePath(),n.fill()}n.fillStyle="rgb(200,200,200)",n.fillRect(0,0,65,13),n.fillStyle="rgb(0,0,0)",n.fillText(r.uni.ps.length+" planets",2,10)}}var e,i,n;return e=t,(i=[{key:"initRandom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;this.uni.ps=[];for(var r=0;r<t;r++){var o=i+Math.random()*(n-i),h=2*Math.random()*Math.PI;this.uni.createPlanet(e,this.w*Math.random(),this.h*Math.random(),o*Math.cos(h),o*Math.sin(h))}return this}},{key:"initBigBang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this.uni.ps=[];for(var o=.5*this.w,h=.5*this.h,s=2*Math.PI/t,a=0;a<t;a++){var l=a*s,u=r*Math.random(),f=o+u*Math.cos(l),v=h+u*Math.sin(l),c=i+Math.random()*(n-i),d=l+2*(Math.random()-.5)*2*Math.PI/3,p=c*Math.cos(d),y=c*Math.sin(d);this.uni.createPlanet(e,f,v,p,y)}return this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=0,h=this,s=function s(){h.uni.step(t,e,i,n),h.cplus.redraw(),r>0&&o++>r||setTimeout(s,0)};s()}},{key:"stop",value:function(){}}])&&v(e.prototype,i),n&&v(e,n),t}(),d=function(t){return new c(t)},p=function(t,e){this.w=t,this.h=e,this.population=[],this.populationI={},this.add=function(t,e){var i=t+"_"+e,n=this.populationI[i];return n?null:(n={x:t,y:e,nb:0},this.population.push(n),this.populationI[i]=n,n)},this.fillRandomly=function(t){for(var e=0,i=this.w*this.h*t;e<i;){var n=Math.round(this.w*Math.random()),r=Math.round(this.h*Math.random());this.add(n,r)&&e++}return this},this.step=function(){var t,e,i,n,r,o,h,s={};for(t=0;t<this.population.length;t++){var a=y(this.population[t],this);for(e=0;e<a.length;e++)(o=s[h=(r=a[e]).x+"_"+r.y])?o.nb++:(r.nb=1,s[h]=r)}var l=[],u={};for(t=0;t<this.population.length;t++)(n=s[h=(i=this.population[t]).x+"_"+i.y])&&(n.nb<2||n.nb>3||(l.push(i),u[h]=i));this.population=l,this.populationI=u;var f=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}(s);for(s=null,t=0;t<f.length;t++)3===(r=f[t]).nb&&(h=r.x+"_"+r.y,(i=this.populationI[h])||(this.population.push(r),this.populationI[h]=r));return this},this.start=function(t,e,i){var n=0,r=this;return function o(){r.step(),i.redraw(),t>0&&n++>t||setTimeout(o,e)}(),this}},y=function(t,e){var i=0===t.x?e.w-1:t.x-1,n=t.x===e.w-1?0:t.x+1,r=0===t.y?e.h-1:t.y-1,o=t.y===e.h-1?0:t.y+1;return[{x:i,y:r},{x:i,y:t.y},{x:i,y:o},{x:t.x,y:r},{x:t.x,y:o},{x:n,y:r},{x:n,y:t.y},{x:n,y:o}]},g=function(t,e){var i=document.getElementById(t),n=i.offsetWidth,r=i.offsetHeight,o=new p(n,r).fillRandomly(.05),h=new f(e,n,r);h.redraw=function(){var t=this.getContext2D();t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#0000FF";for(var e=0;e<o.population.length;e++){var i=o.population[e];t.fillRect(i.x,i.y,1,1)}},o.start(-1,0,h)}}])}));