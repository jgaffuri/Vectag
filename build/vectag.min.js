!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vectag=e():t.vectag=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="build/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e),n.d(e,"planets",(function(){return d})),n.d(e,"gameOfLife",(function(){return x}));var i=function(t,e){var n=t.indexOf(e);n>-1?t.splice(n,1):console.log("Impossible to remove element not present in array.")};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.res=i,this.lengthX=Math.floor(e/i+1),this.lengthY=Math.floor(n/i+1),this.cells=[];for(var r=0;r<this.lengthX;r++){this.cells[r]=[];for(var o=0;o<this.lengthY;o++)this.cells[r][o]=[]}}var e,n,o;return e=t,(n=[{key:"get",value:function(t,e,n,i){for(var r=[],o=Math.floor(t/this.res);o<Math.floor(n/this.res+1);o++)if(!(o<0||o>=this.lengthX))for(var a=Math.floor(e/this.res);a<Math.floor(i/this.res+1);a++)a<0||a>=this.lengthY||r.push.apply(r,this.cells[o][a]);return r}},{key:"add",value:function(t,e,n){return this.cells[Math.floor(e/this.res)][Math.floor(n/this.res)].push(t)}},{key:"remove",value:function(t,e,n){i(this.cells[Math.floor(e/this.res)][Math.floor(n/this.res)],t)}},{key:"move",value:function(t,e,n,r,o){var a=Math.floor(e/this.res),s=Math.floor(n/this.res),h=Math.floor(r/this.res),l=Math.floor(o/this.res);if(a!=h||s!=l)return i(this.cells[a][s],t),this.cells[h][l].push(t)}}])&&r(e.prototype,n),o&&r(e,o),t}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e,n,i,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.u=e,this.m=n;var s=this.r();this.x=i<s?s:i>e.w-s?e.w-s:i,this.y=r<s?s:r>e.h-s?e.h-s:r,this.vx=o,this.vy=a}var e,n,i;return e=t,(n=[{key:"observe",value:function(){this.fx=0,this.fy=0;for(var t=0;t<this.u.ps.length;t++){var e=this.u.ps[t];if(this!=e){var n=this.d(e);0!==n&&(n*=n*n,this.fx+=.01*(e.x-this.x)*this.m*e.m/n,this.fy+=.01*(e.y-this.y)*this.m*e.m/n)}}}},{key:"d",value:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)}},{key:"r",value:function(){return Math.pow(this.m/Math.PI,.5)}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=this.fx/this.m,r=this.fy/this.m;if(this.vx+=i*n,this.vy+=r*n,e>0){var o=Math.sqrt(this.vx*this.vx+this.vy*this.vy);o>e&&(this.vx=e*this.vx/o,this.vy=e*this.vy/o)}var a=this.x+this.vx*n,s=this.y+this.vy*n;if(t){var h=this.r(),l=1;a<h&&(a=h,this.vx=-this.vx*l),s<h&&(s=h,this.vy=-this.vy*l),a>this.u.w-h&&(a=this.u.w-h,this.vx=-this.vx*l),s>this.u.h-h&&(s=this.u.h-h,this.vy=-this.vy*l)}else a<0&&(a=this.u.w),s<0&&(s=this.u.h),a>this.u.w&&(a=0),s>this.u.h&&(s=0);this.u.move(this,a,s)}}])&&a(e.prototype,n),i&&a(e,i),t}();function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.min(e,n)/100;h(this,t),this.w=e,this.h=n,this.ps=[],this.grid=new o(e,n,i)}var e,n,r;return e=t,(n=[{key:"m",value:function(){for(var t=0,e=0;e<this.ps.length;e++)t+=this.ps[e].m;return t}},{key:"createPlanet",value:function(t,e,n,i,r){var o=new s(this,t,e,n,i,r);this.add(o)}},{key:"add",value:function(t){t.u=this,this.ps.push(t),this.grid.add(t,t.x,t.y)}},{key:"remove",value:function(t){t.u=null,i(this.ps,t),this.grid.remove(t,t.x,t.y)}},{key:"move",value:function(t,e,n){this.grid.move(t,t.x,t.y,e,n),t.x=e,t.y=n}},{key:"aggregate",value:function(t,e){var n=t.m+e.m,i=this.createPlanet(n,(t.x*t.m+e.x*e.m)/n,(t.y*t.m+e.y*e.m)/n,(t.vx*t.m+e.vx*e.m)/n,(t.vy*t.m+e.vy*e.m)/n);return this.remove(t),this.remove(e),i}},{key:"findCollision",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<this.ps.length;e++)for(var n=this.ps[e],i=2*n.r(),r=this.grid.get(n.x-i,n.y-i,n.x+i,n.y+i),o=0;o<r.length;o++){var a=r[o];if(n!=a){var s=n.d(a),h=(n.r()+a.r())*t;if(!(s>h))return[n,a]}}return null}},{key:"step",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;for(t=0;t<this.ps.length;t++)this.ps[t].observe();for(t=0;t<this.ps.length;t++)this.ps[t].change(e,n,r);for(var o=this.findCollision(i);null!==o;)this.aggregate(o[0],o[1]),o=this.findCollision(i)}}])&&l(e.prototype,n),r&&l(e,r),t}(),f=function(t,e,n){var i=document.getElementById(t).getContext("2d");e&&(i.canvas.width=e),n&&(i.canvas.height=n),this.getContext2D=function(){return i},this.redraw=function(){return console.log("Override redraw method"),this}};function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"cdiv",e.canvasId=e.canvasId||"canvas";var n=document.getElementById(e.divId);this.w=n.offsetWidth,this.h=n.offsetHeight,this.uni=new u(this.w,this.h),this.cplus=new f(e.canvasId,this.w,this.h);var i=this.cplus.getContext2D();i.fillStyle="black",i.fillRect(0,0,this.w,this.h);var r=this;this.cplus.redraw=function(){i.fillStyle="rgba(0,0,0,0.05)",i.fillRect(0,0,r.w,r.h);for(var t=0;t<r.uni.ps.length;t++){var e=r.uni.ps[t],n=e.m/r.uni.m();i.fillStyle="rgb(255,255,"+Math.floor(255*(1-n))+")",i.beginPath(),i.arc(e.x,e.y,e.r(),0,2*Math.PI),i.closePath(),i.fill()}i.fillStyle="rgb(200,200,200)",i.fillRect(0,0,65,13),i.fillStyle="rgb(0,0,0)",i.fillText(r.uni.ps.length+" planets",2,10)}}var e,n,i;return e=t,(n=[{key:"initRandom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;this.uni.ps=[];for(var r=0;r<t;r++){var o=n+Math.random()*(i-n),a=2*Math.random()*Math.PI;this.uni.createPlanet(e,this.w*Math.random(),this.h*Math.random(),o*Math.cos(a),o*Math.sin(a))}return this}},{key:"initBigBang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this.uni.ps=[];for(var o=.5*this.w,a=.5*this.h,s=2*Math.PI/t,h=0;h<t;h++){var l=h*s,u=r*Math.random(),f=o+u*Math.cos(l),v=a+u*Math.sin(l),c=n+Math.random()*(i-n),d=l+2*(Math.random()-.5)*2*Math.PI/3,p=c*Math.cos(d),y=c*Math.sin(d);this.uni.createPlanet(e,f,v,p,y)}return this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=0,a=this,s=function s(){a.uni.step(t,e,n,i),a.cplus.redraw(),r>0&&o++>r||setTimeout(s,0)};s()}},{key:"stop",value:function(){}}])&&v(e.prototype,n),i&&v(e,i),t}(),d=function(t){return new c(t)};function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e,this.h=n,this.population=[],this.populationI={}}var e,n,i;return e=t,i=[{key:"getCellSurrounding",value:function(t,e){var n=0===t.x?e.w-1:t.x-1,i=t.x===e.w-1?0:t.x+1,r=0===t.y?e.h-1:t.y-1,o=t.y===e.h-1?0:t.y+1;return[{x:n,y:r},{x:n,y:t.y},{x:n,y:o},{x:t.x,y:r},{x:t.x,y:o},{x:i,y:r},{x:i,y:t.y},{x:i,y:o}]}}],(n=[{key:"add",value:function(t,e){var n=t+"_"+e;if(this.populationI[n])return null;var i={x:t,y:e,nb:0};return this.population.push(i),this.populationI[n]=i,i}},{key:"step",value:function(){var e,n,i,r,o,a,s,h={};for(e=0;e<this.population.length;e++){var l=t.getCellSurrounding(this.population[e],this);for(n=0;n<l.length;n++)(a=h[s=(o=l[n]).x+"_"+o.y])?a.nb++:(o.nb=1,h[s]=o)}var u=[],f={};for(e=0;e<this.population.length;e++)(r=h[s=(i=this.population[e]).x+"_"+i.y])&&(r.nb<2||r.nb>3||(u.push(i),f[s]=i));this.population=u,this.populationI=f;var v=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}(h);for(e=0;e<v.length;e++)3===(o=v[e]).nb&&(s=o.x+"_"+o.y,(i=this.populationI[s])||(this.population.push(o),this.populationI[s]=o));return this}},{key:"start",value:function(t,e,n){var i=0,r=this;return function o(){r.step(),n.redraw(),t>0&&i++>t||setTimeout(o,e)}(),this}}])&&p(e.prototype,n),i&&p(e,i),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).divId=e.divId||"cdiv",e.canvasId=e.canvasId||"canvas";var n=document.getElementById(e.divId),i=n.offsetWidth,r=n.offsetHeight;this.uni=new y(i,r),this.cplus=new f(e.canvasId,i,r);var o=this;this.cplus.redraw=function(){var t=this.getContext2D();t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#0000FF";for(var e=0;e<o.uni.population.length;e++){var n=o.uni.population[e];t.fillRect(n.x,n.y,1,1)}}}var e,n,i;return e=t,(n=[{key:"initRandom",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.05,e=0,n=this.uni.w*this.uni.h*t;e<n;){var i=Math.round(this.uni.w*Math.random()),r=Math.round(this.uni.h*Math.random()),o=this.uni.add(i,r);o&&e++}return this}},{key:"start",value:function(){this.uni.start(-1,0,this.cplus)}}])&&g(e.prototype,n),i&&g(e,i),t}(),x=function(t){return new m(t)}}])}));